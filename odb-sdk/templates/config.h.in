#pragma once

/* Options ----------------------------------------------------------------- */

#define ODBSDK_${ODBSDK_LIB_TYPE}
#define ODBSDK_PLATFORM_${ODBSDK_PLATFORM}

#cmakedefine ODBSDK_BTREE_64BIT_KEYS
#cmakedefine ODBSDK_BTREE_64BIT_CAPACITY
#cmakedefine ODBSDK_HM_STATS
#cmakedefine ODBSDK_MEM_BACKTRACE
#cmakedefine ODBSDK_MEM_DEBUGGING
#cmakedefine ODBSDK_TESTS
#cmakedefine ODBSDK_VEC_64BIT_CAPACITY

#define ODBSDK_SIZEOF_VOID_P          ${CMAKE_SIZEOF_VOID_P}
#define ODBSDK_BTREE_EXPAND_FACTOR    ${ODBSDK_BTREE_EXPAND_FACTOR}
#define ODBSDK_BTREE_MIN_CAPACITY     ${ODBSDK_BTREE_MIN_CAPACITY}
#define ODBSDK_HM_EXPAND_FACTOR       ${ODBSDK_HM_EXPAND_FACTOR}
#define ODBSDK_HM_MIN_CAPACITY        ${ODBSDK_HM_MIN_CAPACITY}
#define ODBSDK_HM_REHASH_AT_PERCENT   ${ODBSDK_HM_REHASH_AT_PERCENT}
#define ODBSDK_MEM_BACKTRACE_SIZE     ${ODBSDK_MEM_BACKTRACE_SIZE}
#define ODBSDK_THREADLOCAL            ${ODBSDK_THREADLOCAL}
#define ODBSDK_VEC_EXPAND_FACTOR      ${ODBSDK_VEC_EXPAND_FACTOR}
#define ODBSDK_VEC_MIN_CAPACITY       ${ODBSDK_VEC_MIN_CAPACITY}u


/* Symbol visibility ------------------------------------------------------- */

#if defined(ODBSDK_SHARED)
#   if defined(ODBSDK_BUILDING)
#       define ODBSDK_PUBLIC_API ${ODBSDK_API_EXPORT}
#   else
#       define ODBSDK_PUBLIC_API ${ODBSDK_API_IMPORT}
#   endif
#   define ODBSDK_PRIVATE_API ${ODBSDK_API_LOCAL}
#else
#   define ODBSDK_PUBLIC_API
#   define ODBSDK_PRIVATE_API
#endif

/* Version string ---------------------------------------------------------- */

#define ODBSDK_VERSION_MAJOR ${PROJECT_VERSION_MAJOR}
#define ODBSDK_VERSION_MINOR ${PROJECT_VERSION_MINOR}
#define ODBSDK_VERSION_PATCH ${PROJECT_VERSION_PATCH}
#define ODBSDK_VERSION \
    ((ODBSDK_VERSION_MAJOR << 16) | (ODBSDK_VERSION_MINOR << 8) | ODBSDK_VERSION_PATCH)
#define STRINGIFY_(x) #x
#define STRINGIFY(x) STRINGIFY_(x)
#define ODBSDK_VERSION_STR \
    STRINGIFY(ODBSDK_VERSION_MAJOR) "." STRINGIFY(ODBSDK_VERSION_MINOR) "." STRINGIFY(ODBSDK_VERSION_PATCH)
#undef STRINGIFY
#undef STRINGIFY_

/* printf formatting ------------------------------------------------------- */
#if defined(__GNUC__) || defined(__clang__)
#   define ODBSDK_PRINTF_FORMAT(fmt, params) __attribute__((format(printf, fmt, params)))
#else
#   define ODBSDK_PRINTF_FORMAT(fmt, params)
#endif
